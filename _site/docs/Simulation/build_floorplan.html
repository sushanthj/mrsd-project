

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/assets/css/just-the-docs-default.css">

  

  
    <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Gazebo Environment and Mapping | Team Dock Dock Go!</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Gazebo Environment and Mapping" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="MRSD project Team H’s system description" />
<meta property="og:description" content="MRSD project Team H’s system description" />
<link rel="canonical" href="http://localhost:4000/docs/Simulation/build_floorplan.html" />
<meta property="og:url" content="http://localhost:4000/docs/Simulation/build_floorplan.html" />
<meta property="og:site_name" content="Team Dock Dock Go!" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Gazebo Environment and Mapping" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"MRSD project Team H’s system description","headline":"Gazebo Environment and Mapping","url":"http://localhost:4000/docs/Simulation/build_floorplan.html"}</script>
<!-- End Jekyll SEO tag -->


  

</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div class="side-bar">
    <div class="site-header">
      <a href="http://localhost:4000/" class="site-title lh-tight">
  Team Dock Dock Go!

</a>
      <a href="#" id="menu-button" class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      
        <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/Nav2" class="nav-list-link">Nav2</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/Nav2/costmap_updates.html" class="nav-list-link">Costmap Plugins</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/Simulation" class="nav-list-link">Simulation Development</a><ul class="nav-list "><li class="nav-list-item  active"><a href="http://localhost:4000/docs/Simulation/build_floorplan.html" class="nav-list-link active">Gazebo Environment and Mapping</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/Simulation/model_basics.html" class="nav-list-link">Understand Model and World Files</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/Simulation/navigation.html" class="nav-list-link">Navigating in Simulation</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/Simulation/svd_demo.html" class="nav-list-link">Creating Custom World for SVD</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/Simulation/adding_lidar.html" class="nav-list-link">Adding Lidar in Simulation</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/robot_integration" class="nav-list-link">Robot Software Integration</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/robot_integration/pcl_integration.html" class="nav-list-link">PCL Localization Integration</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/robot_integration/neobotix_compute.html" class="nav-list-link">Working on Neobotix Compute</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/robot_integration/software_arch.html" class="nav-list-link">High Level Navigation and Comms Integration</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/robot_integration/neobotix_orin_networking.html" class="nav-list-link">Neobotix-Orin Networking</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/ros" class="nav-list-link">ROS Learnings</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/ros/basics.html" class="nav-list-link">Basics</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/ros/subscribers.html" class="nav-list-link">Building Subscribers and Publishers</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/intro/" class="nav-list-link">Building this Website</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/software_bringup" class="nav-list-link">Systems Setup</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/software_bringup/ros_setup_2.html" class="nav-list-link">ROS2 on the Jetson and Desktop</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/software_bringup/RealSense.html" class="nav-list-link">RealSense Setup</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/software_bringup/vscode.html" class="nav-list-link">VS Code Setup</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/software_bringup/docker_image_management.html" class="nav-list-link">Docker and Dockerhub</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/Mechanical" class="nav-list-link">Mechanical Development</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/Mechanical/frame.html" class="nav-list-link">Frame Design</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/SLAM_toolbox" class="nav-list-link">Understanding SLAM Toolbox</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/SLAM_Toolbox/running.html" class="nav-list-link">Running SLAM Toolbox</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/SLAM_Toolbox/setup.html" class="nav-list-link">Setup for SLAM Toolbox</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/Localization" class="nav-list-link">Robot Localization</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/Localization/AMCL.html" class="nav-list-link">AMCL</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/git_concepts" class="nav-list-link">Git Usage</a></li><li class="nav-list-item"><a href="http://localhost:4000/miscellaneous" class="nav-list-link">Miscellaneous yet Useful</a></li></ul>

      
    </nav>
    <footer class="site-footer">
      This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  </div>
  <div class="main" id="top">
    <div id="main-header" class="main-header">
      
        <div class="search">
          <div class="search-input-wrap">
            <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Team Dock Dock Go!" aria-label="Search Team Dock Dock Go!" autocomplete="off">
            <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
          </div>
          <div id="search-results" class="search-results"></div>
        </div>
      
      
      
        <nav aria-label="Auxiliary" class="aux-nav">
          <ul class="aux-nav-list">
            
              <li class="aux-nav-list-item">
                <a href="https://github.com/orgs/DockDockGo/repositories" class="site-button"
                  
                >
                  Teams's GitHub
                </a>
              </li>
            
          </ul>
        </nav>
      
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list">
              
                <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/docs/Simulation">Simulation Development</a></li>
              
              <li class="breadcrumb-nav-list-item"><span>Gazebo Environment and Mapping</span></li>
            </ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">
        
          <details open="">
  <summary class="text-delta">
    Table of contents
  </summary>
<ol id="markdown-toc">
  <li><a href="#building-environment-from-a-floorplan" id="markdown-toc-building-environment-from-a-floorplan">Building Environment From a Floorplan</a>    <ol>
      <li><a href="#editing-the-environment" id="markdown-toc-editing-the-environment">Editing the Environment</a></li>
      <li><a href="#saving-the-floorplan" id="markdown-toc-saving-the-floorplan">Saving the Floorplan</a></li>
      <li><a href="#example-modelsdf-simulator-description-format" id="markdown-toc-example-modelsdf-simulator-description-format">Example model.sdf (simulator description format)</a></li>
    </ol>
  </li>
  <li><a href="#creating-world-files-from-the-model-we-designed-above" id="markdown-toc-creating-world-files-from-the-model-we-designed-above">Creating world files from the model we designed above</a></li>
  <li><a href="#adding-models-to-existing-neobotix-world-files" id="markdown-toc-adding-models-to-existing-neobotix-world-files">Adding models to existing neobotix world files</a>    <ol>
      <li><a href="#barebones-view-of-neobotix_workshopworld" id="markdown-toc-barebones-view-of-neobotix_workshopworld">Barebones view of neobotix_workshop.world</a>        <ol>
          <li><a href="#process-overview" id="markdown-toc-process-overview">Process Overview</a></li>
        </ol>
      </li>
    </ol>
  </li>
  <li><a href="#running-the-neobotix-simulation" id="markdown-toc-running-the-neobotix-simulation">Running the Neobotix simulation</a></li>
  <li><a href="#running-slam-in-simulation" id="markdown-toc-running-slam-in-simulation">Running SLAM in Simulation</a>    <ol>
      <li><a href="#neobotix-mapping-package" id="markdown-toc-neobotix-mapping-package">Neobotix Mapping Package</a>        <ol>
          <li><a href="#build-steps" id="markdown-toc-build-steps">Build Steps</a></li>
          <li><a href="#choosing-the-map" id="markdown-toc-choosing-the-map">Choosing the Map</a></li>
          <li><a href="#run-steps" id="markdown-toc-run-steps">Run Steps</a></li>
        </ol>
      </li>
      <li><a href="#manual-mapping-package" id="markdown-toc-manual-mapping-package">Manual Mapping Package</a>        <ol>
          <li><a href="#build-steps-1" id="markdown-toc-build-steps-1">Build Steps</a></li>
          <li><a href="#choosing-the-map-1" id="markdown-toc-choosing-the-map-1">Choosing the Map</a></li>
          <li><a href="#run-steps-1" id="markdown-toc-run-steps-1">Run Steps</a></li>
        </ol>
      </li>
      <li><a href="#final-results" id="markdown-toc-final-results">Final Results</a></li>
      <li><a href="#miscellaneous" id="markdown-toc-miscellaneous">Miscellaneous</a></li>
    </ol>
  </li>
</ol>

</details>

<p><img src="/images/Simulation/slam_in_sim.gif" alt="" /></p>
      <h1 id="building-environment-from-a-floorplan">
        
        
          <a href="#building-environment-from-a-floorplan" class="anchor-heading" aria-labelledby="building-environment-from-a-floorplan"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Building Environment From a Floorplan
        
        
      </h1>
    

<p>Gazebo provides a <a href="https://classic.gazebosim.org/tutorials?cat=build_world&amp;tut=building_editor"><strong>‘Building Editor’</strong></a>
to make floorplans in 2D and autogenerate walls, doors and windows.</p>

<p><img src="/images/Simulation/blank_building_editor.png" alt="" /></p>

<p>We will then use a floorplan (eg. from MFI Lego Testbed) as a reference (import using the button shown above):</p>

<p><img src="/images/Simulation/feb28.png" alt="" /></p>
      <h2 id="editing-the-environment">
        
        
          <a href="#editing-the-environment" class="anchor-heading" aria-labelledby="editing-the-environment"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Editing the Environment
        
        
      </h2>
    

<ol>
  <li>We build walls everywhere required (click on the ‘Wall’ button and then click on workspace to begin drawing)</li>
  <li>Add doors accordingly where walls are not present</li>
  <li>Windows can be placed on any walls</li>
</ol>

<p><img src="/images/Simulation/building_floor_walls.png" alt="" /></p>

<p>After placing the initial walls, double clicking on the walls gives us the option to edit the size and position of these walls</p>

<p><img src="/images/Simulation/edited_walls.png" alt="" /></p>
      <h2 id="saving-the-floorplan">
        
        
          <a href="#saving-the-floorplan" class="anchor-heading" aria-labelledby="saving-the-floorplan"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Saving the Floorplan
        
        
      </h2>
    

<p>You can do <code class="language-plaintext highlighter-rouge">File</code> and <code class="language-plaintext highlighter-rouge">Save As</code> to save the floorplan. This will save three files:</p>

<ul>
  <li>MODEL_NAME (given by user) eg. <strong>mfi_floor_trial1</strong>
    <ul>
      <li>model.config</li>
      <li>model.sdf</li>
      <li>world.sdf</li>
    </ul>
  </li>
</ul>

<p>Additionally, if you ever download a model from <code class="language-plaintext highlighter-rouge">git clone https://github.com/osrf/gazebo_models</code> then the following files will be present for:</p>

<ul>
  <li>model_1 : A directory for model_1
    <ul>
      <li>model.config : Meta-data about model_1</li>
      <li>model.sdf : SDF description of the model</li>
      <li>model.sdf.erb : Ruby embedded SDF model description</li>
      <li>meshes : A directory for all COLLADA and STL files</li>
      <li>materials : A directory which should only contain the textures and scripts subdirectories</li>
      <li>textures : A directory for image files (jpg, png, etc).</li>
      <li>scripts : A directory for OGRE material scripts</li>
      <li>plugins: A directory for plugin source and header files</li>
    </ul>
  </li>
</ul>
      <h2 id="example-modelsdf-simulator-description-format">
        
        
          <a href="#example-modelsdf-simulator-description-format" class="anchor-heading" aria-labelledby="example-modelsdf-simulator-description-format"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example model.sdf (simulator description format)
        
        
      </h2>
    

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version='1.0'?&gt;</span>
<span class="nt">&lt;sdf</span> <span class="na">version=</span><span class="s">'1.7'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">'mfi_floor_trial1'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;pose&gt;</span>0.011095 -0.309692 0 0 -0 0<span class="nt">&lt;/pose&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_10'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;collision</span> <span class="na">name=</span><span class="s">'Wall_10_Collision'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;box&gt;</span>
            <span class="nt">&lt;size&gt;</span>1.9 0.05 1<span class="nt">&lt;/size&gt;</span>
          <span class="nt">&lt;/box&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0.5 0 -0 0<span class="nt">&lt;/pose&gt;</span>
      <span class="nt">&lt;/collision&gt;</span>
      <span class="nt">&lt;visual</span> <span class="na">name=</span><span class="s">'Wall_10_Visual'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 0.5 0 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
          <span class="nt">&lt;box&gt;</span>
            <span class="nt">&lt;size&gt;</span>1.9 0.05 1<span class="nt">&lt;/size&gt;</span>
          <span class="nt">&lt;/box&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;material&gt;</span>
          <span class="nt">&lt;script&gt;</span>
            <span class="nt">&lt;uri&gt;</span>file://media/materials/scripts/gazebo.material<span class="nt">&lt;/uri&gt;</span>
            <span class="nt">&lt;name&gt;</span>Gazebo/Grey<span class="nt">&lt;/name&gt;</span>
          <span class="nt">&lt;/script&gt;</span>
          <span class="nt">&lt;ambient&gt;</span>1 1 1 1<span class="nt">&lt;/ambient&gt;</span>
        <span class="nt">&lt;/material&gt;</span>
        <span class="nt">&lt;meta&gt;</span>
          <span class="nt">&lt;layer&gt;</span>0<span class="nt">&lt;/layer&gt;</span>
        <span class="nt">&lt;/meta&gt;</span>
      <span class="nt">&lt;/visual&gt;</span>
      <span class="nt">&lt;pose&gt;</span>-6.0041 -1.14431 0 0 -0 3.14159<span class="nt">&lt;/pose&gt;</span>
    <span class="nt">&lt;static&gt;</span>1<span class="nt">&lt;/static&gt;</span>
  <span class="nt">&lt;/model&gt;</span>
<span class="nt">&lt;/sdf&gt;</span>
</code></pre></div></div>
      <h1 id="creating-world-files-from-the-model-we-designed-above">
        
        
          <a href="#creating-world-files-from-the-model-we-designed-above" class="anchor-heading" aria-labelledby="creating-world-files-from-the-model-we-designed-above"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating world files from the model we designed above
        
        
      </h1>
    

<p>Now that we have a model in the <strong>mfi_floor_trial1</strong> folder, let’s change the folder structure
a little bit.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├── worlds
├── models
│   ├── mfi_floor_trial1
|       ├── model.config
|       ├── model.sdf
|       ├── world.sdf
</code></pre></div></div>

<p>Now, open gazebo and load the above model <strong>mfi_floor_trial1</strong>. Then follow the below steps:</p>

<ul>
  <li>Add any new objects onto this model (like sofa, chair, trashcan)</li>
  <li>save this as <code class="language-plaintext highlighter-rouge">trial_world.world</code> file in the worlds folder.</li>
</ul>

<p>The final folder structure should look like below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├── worlds
|   ├── trial_world.world
├── models
│   ├── mfi_floor_trial1
|       ├── model.config
|       ├── model.sdf
|       ├── world.sdf
</code></pre></div></div>
      <h1 id="adding-models-to-existing-neobotix-world-files">
        
        
          <a href="#adding-models-to-existing-neobotix-world-files" class="anchor-heading" aria-labelledby="adding-models-to-existing-neobotix-world-files"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding models to existing neobotix world files
        
        
      </h1>
    

<p><img src="/images/Simulation/neo_workshop_custom.png" alt="" /></p>
      <h2 id="barebones-view-of-neobotix_workshopworld">
        
        
          <a href="#barebones-view-of-neobotix_workshopworld" class="anchor-heading" aria-labelledby="barebones-view-of-neobotix_workshopworld"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Barebones view of neobotix_workshop.world
        
        
      </h2>
    

<p>This world file is provided by neobotix
<a href="https://github.com/neobotix/neo_simulation2/blob/rolling/worlds/neo_workshop.world">here</a>.
We will use this world file as our template and add models (walls, tables, trashcan and sofa)
to this world as required.</p>
      <h3 id="process-overview">
        
        
          <a href="#process-overview" class="anchor-heading" aria-labelledby="process-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Process Overview
        
        
      </h3>
    

<ol>
  <li>The world file you created in the saving floorplan section called world.sdf will contain the
 info on walls and tables which we will need to use</li>
  <li>The neobotix world file “neo_workshop.world” looks like this:
 <img src="/images/Simulation/neo_workshop.orig.png" alt="" /></li>
  <li>We need to modify it to the below format</li>
</ol>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;sdf</span> <span class="na">version=</span><span class="s">'1.6'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;world</span> <span class="na">name=</span><span class="s">'default'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;light</span> <span class="na">name=</span><span class="s">'sun'</span> <span class="na">type=</span><span class="s">'directional'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/light&gt;</span>
    <span class="nt">&lt;gravity&gt;</span>0 0 -9.8<span class="nt">&lt;/gravity&gt;</span>
    <span class="nt">&lt;magnetic_field&gt;</span>6e-06 2.3e-05 -4.2e-05<span class="nt">&lt;/magnetic_field&gt;</span>
    <span class="nt">&lt;atmosphere</span> <span class="na">type=</span><span class="s">'adiabatic'</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;physics</span> <span class="na">name=</span><span class="s">'default_physics'</span> <span class="na">default=</span><span class="s">'0'</span> <span class="na">type=</span><span class="s">'ode'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/physics&gt;</span>
    <span class="nt">&lt;scene&gt;</span>
    <span class="nt">&lt;/scene&gt;</span>
    <span class="nt">&lt;wind/&gt;</span>
    <span class="nt">&lt;spherical_coordinates&gt;</span>
    <span class="nt">&lt;/spherical_coordinates&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">'mfi_floor_trial1'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;pose&gt;</span>1.22275 -0.717257 0 0 -0 0<span class="nt">&lt;/pose&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_10'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_14'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_16'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_20'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_21'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_4'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_5'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_6'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_7'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_8'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_9'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;static&gt;</span>1<span class="nt">&lt;/static&gt;</span>
    <span class="nt">&lt;/model&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">'table'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/model&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">'table_0'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/model&gt;</span>
    <span class="nt">&lt;state</span> <span class="na">world_name=</span><span class="s">'default'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;sim_time&gt;</span>12155 846000000<span class="nt">&lt;/sim_time&gt;</span>
      <span class="nt">&lt;real_time&gt;</span>151 139215044<span class="nt">&lt;/real_time&gt;</span>
      <span class="nt">&lt;wall_time&gt;</span>1592070340 176042788<span class="nt">&lt;/wall_time&gt;</span>
      <span class="nt">&lt;iterations&gt;</span>15065<span class="nt">&lt;/iterations&gt;</span>
      <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">'mfi_floor_trial1'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>1.22275 -0.717257 0 0 -0 0<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;scale&gt;</span>1 1 1<span class="nt">&lt;/scale&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_10'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_14'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_16'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_20'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_21'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_4'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_5'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_6'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_7'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_8'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">'Wall_9'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/link&gt;</span>
      <span class="nt">&lt;/model&gt;</span>
      <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">'table'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/model&gt;</span>
      <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">'table_0'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/model&gt;</span>
      <span class="nt">&lt;light</span> <span class="na">name=</span><span class="s">'sun'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose&gt;</span>0 0 10 0 -0 0<span class="nt">&lt;/pose&gt;</span>
      <span class="nt">&lt;/light&gt;</span>
    <span class="nt">&lt;/state&gt;</span>
    <span class="nt">&lt;gui</span> <span class="na">fullscreen=</span><span class="s">'0'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;camera</span> <span class="na">name=</span><span class="s">'user_camera'</span><span class="nt">&gt;</span>
        <span class="nt">&lt;pose</span> <span class="na">frame=</span><span class="s">''</span><span class="nt">&gt;</span>-1.29545 -2.55987 1.20273 0 0.241796 -2.66221<span class="nt">&lt;/pose&gt;</span>
        <span class="nt">&lt;view_controller&gt;</span>orbit<span class="nt">&lt;/view_controller&gt;</span>
        <span class="nt">&lt;projection_type&gt;</span>perspective<span class="nt">&lt;/projection_type&gt;</span>
      <span class="nt">&lt;/camera&gt;</span>
    <span class="nt">&lt;/gui&gt;</span>
    <span class="nt">&lt;audio&gt;</span>
      <span class="nt">&lt;device&gt;</span>default<span class="nt">&lt;/device&gt;</span>
    <span class="nt">&lt;/audio&gt;</span>
    <span class="nt">&lt;model</span> <span class="na">name=</span><span class="s">'neobotix_ground_plane'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;static&gt;</span>1<span class="nt">&lt;/static&gt;</span>
    <span class="nt">&lt;/model&gt;</span>
  <span class="nt">&lt;/world&gt;</span>
<span class="nt">&lt;/sdf&gt;</span>
</code></pre></div></div>

<ul>
  <li>After modifying the <code class="language-plaintext highlighter-rouge">neo_workshop.world</code> file, we can see that there’s a line in the
  above file called <code class="language-plaintext highlighter-rouge">&lt;model name='mfi_floor_trial1'&gt;</code> which refers to the model we saved
  in the “Saving the floorplan” section (we saved the model as mfi_floor_trial1 folder). We
  simply need to copy this folder to the
  <a href="https://github.com/neobotix/neo_simulation2/tree/rolling/models">models</a>
  folder in the neo_simulation2 workspace.</li>
  <li>Run the neobotix simulation as shown in the next section</li>
</ul>
      <h1 id="running-the-neobotix-simulation">
        
        
          <a href="#running-the-neobotix-simulation" class="anchor-heading" aria-labelledby="running-the-neobotix-simulation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the Neobotix simulation
        
        
      </h1>
    

<p>The neo_simulation2 package uses ros2 Humble and will not run on the foxy docker which the
team will be using for most of the development. Therefore, a separate docker container was
setup to run this simulation natively.</p>

<p>The instructions to run this are present in <a href="https://github.com/sushanthj/robot-setup-tool">this repository</a></p>
      <h1 id="running-slam-in-simulation">
        
        
          <a href="#running-slam-in-simulation" class="anchor-heading" aria-labelledby="running-slam-in-simulation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running SLAM in Simulation
        
        
      </h1>
    

<p>The Neobotix mapping package uses the slam_toolbox in synchronous mode and shows better results in loop-closure
in comparison to the Manual mapping package which uses async mode.</p>

<p>A comparison of the two is shown below (final .pgm outputs):</p>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th style="text-align: left">async mode</th>
      <th style="text-align: left">sync mode</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><img src="/images/Simulation/async_pgm.png" alt="" /></td>
      <td style="text-align: left"><img src="/images/Simulation/sync_pgm.png" alt="" /></td>
    </tr>
  </tbody>
</table></div>
      <h2 id="neobotix-mapping-package">
        
        
          <a href="#neobotix-mapping-package" class="anchor-heading" aria-labelledby="neobotix-mapping-package"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Neobotix Mapping Package
        
        
      </h2>
    

<p>This internally uses the slam_toolbox in online sync mode</p>
      <h3 id="build-steps">
        
        
          <a href="#build-steps" class="anchor-heading" aria-labelledby="build-steps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build Steps
        
        
      </h3>
    

<ol>
  <li>Setup the docker environment (should be done when setting up Neobotix simulation above)</li>
  <li>To skip some steps in the above repo, you can pull a pre-built image <code class="language-plaintext highlighter-rouge">docker pull sushanthj/humble_sim_mapping_built</code></li>
  <li>go to the neobotix workspace on the docker environemnt <code class="language-plaintext highlighter-rouge">cd /root/neobotix_workspace/src</code></li>
  <li>If the neo_mp_400-2 package has not been installed, do so manually using <code class="language-plaintext highlighter-rouge">git clone --branch $ROS_DISTRO https://github.com/neobotix/neo_mp_400-2.git</code></li>
  <li>A config file in neo_mp_400-2 package has an error.
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">slam_toolbox</span><span class="pi">:</span>
  <span class="na">ros__parameters</span><span class="pi">:</span>

 <span class="c1"># Plugin params</span>
<span class="err"> </span><span class="na">solver_plugin</span><span class="pi">:</span> <span class="s">solver_plugins::CeresSolver</span>
 <span class="na">ceres_linear_solver</span><span class="pi">:</span> <span class="s">SPARSE_NORMAL_CHOLESKY</span>
 <span class="na">ceres_preconditioner</span><span class="pi">:</span> <span class="s">SCHUR_JACOBI</span>
 <span class="na">ceres_trust_strategy</span><span class="pi">:</span> <span class="s">LEVENBERG_MARQUARDT</span>
 <span class="na">ceres_dogleg_type</span><span class="pi">:</span> <span class="s">TRADITIONAL_DOGLEG</span>
 <span class="na">ceres_loss_function</span><span class="pi">:</span> <span class="s">None</span>

 <span class="c1"># ROS Parameters</span>
 <span class="na">odom_frame</span><span class="pi">:</span> <span class="s">odom</span>
 <span class="na">map_frame</span><span class="pi">:</span> <span class="s">map</span>
 <span class="na">base_frame</span><span class="pi">:</span> <span class="s">base_footprint</span>
 <span class="na">scan_topic</span><span class="pi">:</span> <span class="s">/lidar_1/scan_filtered</span>
 <span class="na">mode</span><span class="pi">:</span> <span class="s">mapping</span> <span class="c1">#localization</span>
</code></pre></div>    </div>
    <p>Change the scan_topic to <code class="language-plaintext highlighter-rouge">scan_topic: /scan</code>. This <code class="language-plaintext highlighter-rouge">/scan</code> topic is what will be used by slam_toolbox to build the map</p>
  </li>
  <li>Move back to workspace to build <code class="language-plaintext highlighter-rouge">cd /root/neobotix_workspace</code></li>
  <li><code class="language-plaintext highlighter-rouge">colcon build --symlink-install</code></li>
</ol>
      <h3 id="choosing-the-map">
        
        
          <a href="#choosing-the-map" class="anchor-heading" aria-labelledby="choosing-the-map"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Choosing the Map
        
        
      </h3>
    

<p>Initially we chose a map by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">MY_ROBOT</span><span class="o">=</span>mp_400
<span class="nb">export </span><span class="nv">MAP_NAME</span><span class="o">=</span>neo_workshop
</code></pre></div></div>

<p>But, if we want to do mapping on a custom gazebo map we’ll need to do the following:</p>

<ol>
  <li>Use world_files folder to copy the trial_world.world (our custom world we created) into the ~/neobotix_workspace/src/neo_simulation2/worlds folder</li>
  <li>Use world_files folder to copy the entire folder mfi_floor_trial1 into ~/neobotix_workspace/src/neo_simulation2/models folder</li>
  <li>Change export MAP_NAME=trial_world</li>
  <li>Continue process below to launch mapping</li>
</ol>
      <h3 id="run-steps">
        
        
          <a href="#run-steps" class="anchor-heading" aria-labelledby="run-steps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Run Steps
        
        
      </h3>
    

<ul>
  <li><code class="language-plaintext highlighter-rouge">ros2 launch neo_simulation2 simulation.launch.py</code></li>
  <li>The above script should launch simulation which starts publishing topics called ‘/scan’ and some odometry topics</li>
  <li><em>Note. the above topics should match the topics slam_toolbox requires, this is present in <a href="https://github.com/SteveMacenski/slam_toolbox/blob/ros2/config/mapper_params_online_sync.yaml">this file</a></em></li>
  <li>Now that we have simulation running, we can launch the slam toolbox by launching the package we created (i.e. sush_mapping, sorry about the name)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ros2 launch neo_mp_400-2 mapping.launch.py parameters:=/root/neobotix_workspace/src/neo_mp_400-2/configs/navigation/mapping.yaml</code></li>
    </ul>
  </li>
  <li>The SLAM toolbox might throw some errors in XML-Parser errors, these can be ignored</li>
  <li>Now, to vizualise the map being generated, launch rviz <code class="language-plaintext highlighter-rouge">ros2 run rviz2 rviz2</code></li>
  <li>Once in rviz, click <strong>Add</strong> in the botton left corner and in the first pane itself (<em>by display type</em>), there is a Map option. Select that.</li>
  <li>Now, the map still won’t load until you choose the right topic.
    <ul>
      <li>Select Topic = map</li>
      <li>Select Update Topic = /map_updates</li>
    </ul>
  </li>
  <li>Then move around the robot (using teleop) and you should see the map being generated as shown below</li>
  <li>Now, we run map_saver package to save the map created by the SLAM toolbox as a .pgm file
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ros2 run nav2_map_server map_saver_cli -f /root/neobotix_workspace/src/neo_mp_400-2/configs/navigation/trial_map</code></li>
    </ul>
  </li>
</ul>

<!-- ## Debugging on Map Generation (trying to use the neobotix mapping setup)

1. clone the neobotix package ```git clone --branch $ROS_DISTRO https://github.com/neobotix/neo_mp_400-2.git```
2. ```colcon build --symlink-install```
3. ```source /root/neobotix_workspace/install/local_setup.bash```
4. set the environment variables
    export MY_ROBOT=mp_400
    export MAP_NAME=neo_workshop
5. run ```RMW_IMPLEMENTATION=rmw_fastrtps_cpp```
6. run ```FASTRTPS_DEFAULT_PROFILES_FILE=/root/neobotix_workspace/src/neo_mp_400-2/DEFAULT_FASTRTPS_PROFILES.xml```
7. run ```ros2 launch neo_mp_400-2 mapping.launch.py parameters:=/root/neobotix_workspace/src/neo_mp_400-2/configs/navigation/mapping.yaml```
8. Open another tmux panel and run simulation
    ```ros2 launch neo_simulation2 simulation.launch.py```
9. Run ```ros2 run rviz2 rviz2``` and add the topics which are being published from the slam toolbox
10. Watch [this youtube video](https://www.youtube.com/watch?v=rZOxPGCn4QM&ab_channel=TheConstruct) -->
      <h2 id="manual-mapping-package">
        
        
          <a href="#manual-mapping-package" class="anchor-heading" aria-labelledby="manual-mapping-package"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Manual Mapping Package
        
        
      </h2>
    

<p>Note. Since this mapping setup works, the XML parser error seen in the above neobotix mapper
is probably not an issue</p>
      <h3 id="build-steps-1">
        
        
          <a href="#build-steps-1" class="anchor-heading" aria-labelledby="build-steps-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build Steps
        
        
      </h3>
    
<ul>
  <li><code class="language-plaintext highlighter-rouge">cd /root/neobotix_workspace/src</code></li>
  <li><code class="language-plaintext highlighter-rouge">git clone --branch $ROS_DISTRO https://github.com/neobotix/neo_mp_400-2.git</code></li>
  <li><code class="language-plaintext highlighter-rouge">cd neo_mp_400-2</code></li>
  <li><code class="language-plaintext highlighter-rouge">cd ..</code></li>
  <li>Copy the package which will launch the slam_toolbox <code class="language-plaintext highlighter-rouge">cp /home/admin/worlds/sush_mapping .</code></li>
  <li><code class="language-plaintext highlighter-rouge">cd ..</code></li>
  <li><code class="language-plaintext highlighter-rouge">colcon build --symlink-install</code></li>
  <li>source necessary files <code class="language-plaintext highlighter-rouge">source install/setup.bash</code></li>
</ul>
      <h3 id="choosing-the-map-1">
        
        
          <a href="#choosing-the-map-1" class="anchor-heading" aria-labelledby="choosing-the-map-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Choosing the Map
        
        
      </h3>
    

<p>Initially we chose a map by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">MY_ROBOT</span><span class="o">=</span>mp_400
<span class="nb">export </span><span class="nv">MAP_NAME</span><span class="o">=</span>neo_workshop
</code></pre></div></div>

<p>But, if we want to do mapping on a custom gazebo map we’ll need to do the following:</p>

<ol>
  <li>Use world_files folder to copy the trial_world.world (our custom world we created) into the ~/neobotix_workspace/src/neo_simulation2/worlds folder</li>
  <li>Use world_files folder to copy the entire folder mfi_floor_trial1 into ~/neobotix_workspace/src/neo_simulation2/models folder</li>
  <li>Change export MAP_NAME=trial_world</li>
  <li>Continue process below to launch mapping</li>
</ol>
      <h3 id="run-steps-1">
        
        
          <a href="#run-steps-1" class="anchor-heading" aria-labelledby="run-steps-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Run Steps
        
        
      </h3>
    

<ul>
  <li><code class="language-plaintext highlighter-rouge">ros2 launch neo_simulation2 simulation.launch.py</code></li>
  <li>The above script should launch simulation which starts publishing topics called ‘/scan’ and some odometry topics</li>
  <li><em>Note. the above topics should match the topics slam_toolbox requires, this is present in <a href="https://github.com/SteveMacenski/slam_toolbox/blob/ros2/config/mapper_params_online_async.yaml">this file</a></em></li>
  <li>Now that we have simulation running, we can launch the slam toolbox by launching the package we created (i.e. sush_mapping, sorry about the name)</li>
  <li><code class="language-plaintext highlighter-rouge">ros2 launch sush_mapping online_async_launch.py</code></li>
  <li>The SLAM toolbox might throw some errors in XML-Parser errors, these can be ignored</li>
  <li>Now, to vizualise the map being generated, launch rviz <code class="language-plaintext highlighter-rouge">ros2 run rviz2 rviz2</code></li>
  <li>Once in rviz, click <strong>Add</strong> in the botton left corner and in the first pane itself (<em>by display type</em>), there is a Map option. Select that.</li>
  <li>Now, the map still won’t load until you choose the right topic.
    <ul>
      <li>Select Topic = map</li>
      <li>Select Update Topic = /map_updates</li>
    </ul>
  </li>
  <li>Then move around the robot (using teleop) and you should see the map being generated as shown below</li>
  <li>Now, we run map_saver package to save the map created by the SLAM toolbox as a .pgm file
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ros2 run nav2_map_server map_saver_cli -f /root/neobotix_workspace/src/neo_mp_400-2/configs/navigation/sush_map</code></li>
    </ul>
  </li>
</ul>
      <h2 id="final-results">
        
        
          <a href="#final-results" class="anchor-heading" aria-labelledby="final-results"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Final Results
        
        
      </h2>
    

<p><a href="https://drive.google.com/file/d/1bnxIkLVmaPxOzmqB-f7GDae1AKrEZugu/view?usp=sharing" class="btn fs-3 mb-4 mb-md-0">Complete Simulation Video</a></p>

<p><img src="/images/Simulation/slam_in_sim.gif" alt="" /></p>
      <h2 id="miscellaneous">
        
        
          <a href="#miscellaneous" class="anchor-heading" aria-labelledby="miscellaneous"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Miscellaneous
        
        
      </h2>
    

<ul>
  <li>Check if a particular package is installed: <code class="language-plaintext highlighter-rouge">ros2 pkg list | grep slam</code></li>
</ul>

        

        

        
        
          <hr>
          <footer>
            

            <p class="text-small text-grey-dk-100 mb-0"></p>

            
              <div class="d-flex mt-2">
                
                
              </div>
            
          </footer>
        

      </div>
    </div>

    
      

      <div class="search-overlay"></div>
    
  </div>
</body>
</html>

